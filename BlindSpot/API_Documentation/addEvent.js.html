<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: addEvent.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: addEvent.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { FIREBASE_DB } from './FirebaseConfig';
import { doc, addDoc, getDoc, collection } from 'firebase/firestore';

/** 
 * Adds a calendar event to the database. Returns true if added successfully and error otherwise. 
 * @param {string} user_id - the current logged in user's unique identifier
 * @param {Object} single_time_event - a non-recurring calendar event
 * @param {Object} recurring_event - a recurring calendar event */
async function addEvent(user_id, single_time_event, recurring_event) {
    try {
        const calendar_id = user_id + "_calendar";

        if (single_time_event !== null) {
            console.log("Adding Single Time Event");
            await addDoc(collection(FIREBASE_DB, 'events'), {
                calendar_id: calendar_id,
                title: single_time_event.title,
                description: single_time_event.description,
                location: single_time_event.location,
                start_time: new Date (single_time_event.start_time),
                end_time: new Date (single_time_event.end_time),
                change: single_time_event.change,
                category: single_time_event.category,
                
            });
            console.log(`Single Time Event: "${single_time_event.title}" added successfully.`);
        }
        else if (recurring_event !== null) {
            console.log("Adding Recurring Event");

            await addDoc(collection(FIREBASE_DB, 'recurring'), {
                calendar_id: calendar_id,
                title: recurring_event.title,
                description: recurring_event.description,
                location: recurring_event.location,
                start_time: recurring_event.start_time,
                end_time: recurring_event.end_time,
                change: recurring_event.change,
                days: recurring_event.days,
                start_date: recurring_event.start_date,
                end_date: recurring_event.end_date,
                week_frequency: recurring_event.week_frequency,
                category: recurring_event.category,
            });
            console.log(`Recurring Event: "${recurring_event.title}" added successfully.`);
        }
        else {
            console.error("No event data provided.");
            return {
                success: false,
                message: "No event data provided.",
            };
        }
        return {
            success: true,
            message: `Event added successfully.`,
        };
    } catch (error) {
        console.error("Error adding event to collection: ", error);
        return {
            success: false,
            message: "An error occurred adding this event",
        };
    }
}

export { addEvent };</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addEvent">addEvent</a></li><li><a href="global.html#addUserToUsersCollection">addUserToUsersCollection</a></li><li><a href="global.html#askGPT">askGPT</a></li><li><a href="global.html#calendar2firebase">calendar2firebase</a></li><li><a href="global.html#chatGPTRequest">chatGPTRequest</a></li><li><a href="global.html#displayEvents">displayEvents</a></li><li><a href="global.html#displayEvents2">displayEvents2</a></li><li><a href="global.html#findEvent">findEvent</a></li><li><a href="global.html#getStartEndTime">getStartEndTime</a></li><li><a href="global.html#getTaskHistory">getTaskHistory</a></li><li><a href="global.html#removeEvent">removeEvent</a></li><li><a href="global.html#retrieveInfo">retrieveInfo</a></li><li><a href="global.html#scheduleMod">scheduleMod</a></li><li><a href="global.html#updateDescription">updateDescription</a></li><li><a href="global.html#updateEvent">updateEvent</a></li><li><a href="global.html#updateLocation">updateLocation</a></li><li><a href="global.html#updateProfile">updateProfile</a></li><li><a href="global.html#updateProfileObject">updateProfileObject</a></li><li><a href="global.html#updateRecurrence">updateRecurrence</a></li><li><a href="global.html#updateTime">updateTime</a></li><li><a href="global.html#updateTitle">updateTitle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Dec 05 2024 22:20:13 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
